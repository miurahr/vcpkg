From 7fac599ec0a75675ed8c1e0d74a20e8e97002c12 Mon Sep 17 00:00:00 2001
From: Hiroshi Miura <miurahr@linux.com>
Date: Thu, 22 Feb 2018 09:23:47 +0900
Subject: [PATCH 11/11] [cmake] use target_compile_definitions() instead of
 add_definitions()

Signed-off-by: Hiroshi Miura <miurahr@linux.com>
---
 src/CMakeLists.txt | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 29b97ca..18f5cb5 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -74,21 +74,21 @@ if(ICONV_FOUND)
   endif()
 endif()
 
-add_definitions("-DVERSION=\"${PROJECT_VERSION}\"")
-add_definitions("-DTARGET_CPU=\"${CMAKE_SYSTEM_PROCESSOR}\"")
+target_compile_definitions(${TARGET_NAME} PRIVATE "-DVERSION=\"${PROJECT_VERSION}\"")
+target_compile_definitions(${TARGET_NAME} PRIVATE "-DTARGET_CPU=\"${CMAKE_SYSTEM_PROCESSOR}\"")
 if(MSVC)
-add_definitions("-DM_PI=3.14159265358979323846")
+  target_compile_definitions(${TARGET_NAME} "-DM_PI=3.14159265358979323846")
 endif()
 
 if(CHARLS_FOUND AND CHARLS_VERSION EQUAL 1)
   target_link_libraries(${TARGET_NAME} PUBLIC ${CHARLS_LIBRARIES})
 else()
-  add_definitions(-DOMIT_CHARLS)
+  target_compile_definitions(${TARGET_NAME} PRIVATE -DOMIT_CHARLS)
 endif()
 if(LZMA_FOUND)
   target_link_libraries(${TARGET_NAME} PUBLIC ${LZMA_LIBRARY})
 else()
-  add_definitions(-DOMIT_LZMA)
+  target_compile_definitions(${TARGET_NAME} PRIVATE -DOMIT_LZMA)
 endif()
 if(OPENJPEG_FOUND)
   target_link_libraries(${TARGET_NAME} PUBLIC ${OPENJPEG_LIBRARIES})
@@ -106,12 +106,12 @@ if(OPENJPEG_FOUND)
     message(FATAL_ERROR "Unsupported openjpeg library version: ${OPENJPEG_VERSION_STRING}")
   endif()
 else()
-  add_definitions(-DOMIT_OPENJPEG)
+  target_compile_definitions(${TARGET_NAME} PRIVATE -DOMIT_OPENJPEG)
 endif()
 if(WEBP_FOUND)
   target_link_libraries(${TARGET_NAME} PUBLIC ${WEBP_LIBRARY})
 else()
-  add_definitions(-DOMIT_WEBP)
+  target_compile_definitions(${TARGET_NAME} PRIVATE -DOMIT_WEBP)
 endif()
 
 
-- 
2.16.1

